<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>Design of STCF MDC FEE - Meng&#39;s Blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">


<link href="/zh-cn/Design-of-STCF-MDC-FEE/" rel="alternate" hreflang="zh-CN" />
    


<meta name="description" content="Go forward. Don't look back. ">





    <meta name="description" content="This is one of my course papers, which details the design of the Front-End Electronics for the Main Drift Chamber of the Super Tau-Charm Facility.">
<meta property="og:type" content="article">
<meta property="og:title" content="Design of STCF MDC FEE">
<meta property="og:url" content="https://mengisok.github.io/Design-of-STCF-MDC-FEE/index.html">
<meta property="og:site_name" content="Meng&#39;s Blog">
<meta property="og:description" content="This is one of my course papers, which details the design of the Front-End Electronics for the Main Drift Chamber of the Super Tau-Charm Facility.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://mengisok.github.io/images/overall_layout_of_STCF.png">
<meta property="og:image" content="https://mengisok.github.io/images/components_of_STCF_detector.png">
<meta property="og:image" content="https://mengisok.github.io/images/components_of_electronics_for_particle_physics_experiments.png">
<meta property="og:image" content="https://mengisok.github.io/images/STCF_MDC_readout_electronics_system_architecture.png">
<meta property="og:image" content="https://mengisok.github.io/images/structure_of_FEE.png">
<meta property="og:image" content="https://mengisok.github.io/images/circuit_model_in_LTspice.png">
<meta property="og:image" content="https://mengisok.github.io/images/daughterboard_and_motherboard_structure_for_FEE.png">
<meta property="og:image" content="https://mengisok.github.io/images/STCF_MDC_FEE_PCB.png">
<meta property="og:image" content="https://mengisok.github.io/images/FEE_PCB.png">
<meta property="article:published_time" content="2023-10-15T15:58:19.000Z">
<meta property="article:modified_time" content="2023-11-11T06:00:41.029Z">
<meta property="article:author" content="Han Meng">
<meta property="article:tag" content="Physical Electronics">
<meta property="article:tag" content="Readout Electronics">
<meta property="article:tag" content="STCF">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mengisok.github.io/images/overall_layout_of_STCF.png">





<link rel="icon" href="/favicon.png">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">


<link rel="stylesheet" href="/css/style.css">


<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
    
    
    
    
    
    
    
    
    

    


<meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                    
                    Meng&#39;s blog
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/archives">Archives</a>
            
            <a class="navbar-item "
               href="/categories">Categories</a>
            
            <a class="navbar-item "
               href="/tags">Tags</a>
            
            <a class="navbar-item "
               href="/links">Links</a>
            
            <a class="navbar-item "
               href="/about">About</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
<div class="column is-narrow has-text-centered">
    <div class="dropdown is-up is-right is-hoverable" style="margin-top: -0.2em;">
        <div class="dropdown-trigger">
            <button class="button is-small" aria-haspopup="true" aria-controls="dropdown-menu7">
                <span class="icon">
                    <i class="fas fa-globe"></i>
                </span>
                <span>English</span>
                <span class="icon is-small">
            <i class="fas fa-angle-down" aria-hidden="true"></i>
          </span>
            </button>
        </div>
        <div class="dropdown-menu has-text-left" role="menu" style="top:100%">
            <div class="dropdown-content">
            
                <a href="/Design-of-STCF-MDC-FEE/" class="dropdown-item">
                    English
                </a>
            
                <a href="/zh-cn/Design-of-STCF-MDC-FEE/" class="dropdown-item">
                    简体中文
                </a>
            
            </div>
        </div>
    </div>
</div>

            
            <a class="navbar-item search" title="Search" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            <div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only toc">
                <a class="navbar-item" title="Table of Contents">
                    <i class="fa fa-list"></i>
                </a>
                <div class="navbar-dropdown is-right">
                    
                    
                    
                    
                    <a class="navbar-item" href="#Abstract">1&nbsp;&nbsp;<b>Abstract</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Background-and-Significance">2&nbsp;&nbsp;<b>Background and Significance</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Overall-System-Structure">3&nbsp;&nbsp;<b>Overall System Structure</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#MDC-Readout-Electronics">3.1&nbsp;&nbsp;MDC Readout Electronics</a>
                    
                    
                    
                    <a class="navbar-item" href="#Daughter-Mother-Structure-for-Validation-Boards">3.2&nbsp;&nbsp;Daughter-Mother Structure for Validation Boards</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Design-of-the-Analog-Daughter-Board">4&nbsp;&nbsp;<b>Design of the Analog Daughter Board</b></a>
                    
                    
                    
                    <a class="navbar-item" href="#Schematic-design">4.1&nbsp;&nbsp;Schematic design</a>
                    
                    
                    
                    <a class="navbar-item" href="#PCB-Design">4.2&nbsp;&nbsp;PCB Design</a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Conclusion">5&nbsp;&nbsp;<b>Conclusion</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#References">6&nbsp;&nbsp;<b>References</b></a>
                    
                </div>
            </div>
            
            
            <a class="navbar-item" title="GitHub" target="_blank" rel="noopener" href="https://github.com/mengisok">
                
                <i class="fab fa-github"></i>
                
            </a>
               
            
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            Design of STCF MDC FEE
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <span>Oct 15 2023</span>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/categories/%E5%AE%9E%E9%AA%8C%E5%AE%A4%E5%B7%A5%E4%BD%9C/">Laboratory Work</a><span>></span><a class="article-category-link" href="/categories/%E5%AE%9E%E9%AA%8C%E5%AE%A4%E5%B7%A5%E4%BD%9C/STCF/">STCF</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            22 minutes read (About 3368 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <p>This is one of my course papers, which details the design of the Front-End Electronics for the Main Drift Chamber of the Super Tau-Charm Facility.</p>
<span id="more"></span>
<p>(The following has been modified and formatted in an informal paper format to make it easier to read. )</p>
<h2 id="Abstract">Abstract</h2>
<hr>
<p>The <strong>Super Tau-Charm Facility (STCF)</strong> is a new-generation positron collider planned to be built in China, which is a continuation of the currently operating Beijing Electron Positron Collider II (BEPC II) and its companion Beijing Spectrometer III (BES III), which are dedicated to the physics of the &#x3C4;-charm region.</p>
<p><strong>The Main Drift Chamber (MDC)</strong> is one of the main sub-detectors of the STCF detector, which is mainly used for final-state charged particle trajectory, momentum measurement and particle identification. The weak analog electrical signals output from the detector need to be configured with a set of <strong>Readout Electronics</strong> system to process them, amplify them and convert them into digital signals to form case data that can reflect the characteristics of the particles for the Data Acquisition System (DAQ) to rebuild and record the physical cases, which are provided to physicists for offline analysis.</p>
<p>This paper describes the overall structure of the STCF MDC front-end readout electronics system prototype circuit verification board, as well as the preliminary design of the analog daughter board. The MDC readout electronics consists of the <strong>Front End Electronics (FEE) module</strong> and the <strong>Readout Unit (RU) module</strong>, corresponding to the analog daughter board and the digital mother board, respectively. The whole system is a 16-channel system with 2 channels on a single daughter board, and every 2 daughter boards are connected to 1 mother board. The daughter board contains 4 parts: TIA and ADC drivers circuit, calibration circuit, power supply circuit and main control circuit.</p>
<p>For now, PCB layout, soldering and preliminary testing have been completed, and the joint test of electronics and detector  is underway to prepare for further electronics system design.</p>
<h2 id="Background-and-Significance">Background and Significance</h2>
<hr>
<p>Particle physics studies the composition and interaction of matter at a deeper level than the atomic nucleus, which is closely related to the origin and evolution of the universe, leading the development of mankind&#x2019;s basic view of space and time, and is the science at the forefront of mankind&#x2019;s understanding of the world. At the same time, it has given rise to many new cross-disciplines, spawned the construction of specialized large-scale scientific devices (e.g. colliders and accelerators), and developed into a large-scale comprehensive platform for multidisciplinary cross-frontier research.</p>
<p><strong>Accelerator-based particle physics experiments</strong> are one of the most effective means of studying the microscopic material world. Today&#x2019;s accelerator-based particle physics experimental research can be categorized into high-energy frontier and high-brightness frontier, two different frontiers that complement each other. As one of the important representatives of <strong>high-brightness</strong> frontier accelerator experiments, the Positron-Negative Electron Collider &#x2013; tau-charm facility operates in the tau-charm energy region (center of mass energy of 2-5 GeV) and has been one of the key focuses of attention in the field of particle physics research in the past 40 years. The Beijing Positron-Negative Electron Collider/Beijing Spectrometer (BEPCII/BESIII) experiments built under the auspices of China have historically made world-renowned physics achievements such as tau lepton mass measurements, R-value measurements, and the discovery of X (1835), laying the foundation of China&#x2019;s high-energy physics research.</p>
<p>However, due to the constraints of geographic location and some infrastructural conditions, BEPCII/BESIII does not have the space and potential to further improve its performance significantly. In addition, with the aging of the detectors and the competition from other particle physics experiments (e.g., BELLE-II, LHCb, etc.), BEPCII/BESIII will complete its historical mission in 5-10 years. In view of the importance and needs of physics in the tau-charm energy region mentioned above, as well as the current status of experimental research in this energy region both at home and abroad, China has proposed to build a new generation <strong>ultra-high-brightness positron-negative electron collider &#x2013; Super Tau Charm Facility</strong> &#x2013; to continue to maintain its leading position in this research field.</p>
<img title="overall_layout_of_STCF" src="/images/overall_layout_of_STCF.png" alt="overall_layout_of_STCF" width="450">
<p>The overall layout of the STCF is shown above. It includes an accelerator facility with a brightness greater than 0.5 &#xD7; 1035 cm-2s-1, a center-of-mass energy of collisions covering 2-7 GeV, a multifunctional magnetic spectrometer capable of adapting to high-brightness environments to meet the needs of physics research, and related infrastructure.</p>
<p><strong>The core technology of the STCF accelerator is how to break through the peak collisional brightness</strong>. In order to realize the ultra-high brightness, STCF will adopt the widely used flat symmetric positive and negative electron beams and double-ring structure. The STCF detector is a large-scale integrated detector consisting of a combination of multiple particle detectors for the detection and species identification of end-state particles (protons, &#x3C0;, K, electrons, muons, photons, etc.) produced by collisions of positive and negative electrons.</p>
<img src="/images/components_of_STCF_detector.png" alt="components_of_STCF_detector" title="components_of_STCF_detector" width="500">
<p>As shown in the figure above, the STCF detector consists of <strong>the Inner Tracker (ITK), the Outer Track Detector (i.e. MDC), the Particle Identification (PID), the Electromagnetic Calorimeter (EMC), the Superconducting Magnet, and the Muon Detector (MUD)</strong>.</p>
<p>Among them, the Outer Track Detector is a large cylindrical precision drift chamber surrounding the ITK,<strong>which carries out the main functions of charged particle trajectory and momentum measurements, and is therefore also called the Main Drift Chamber (MDC)</strong>. The MDC also measures the loss of ionization energy of charged particles, and is used to identify low-momentum charged particles. The MDC is filled with gas, and has a large number of fine wires arranged axially, forming a large number of drift cells. By measuring the drift time of the ionized electrons generated by the charged particles in the cells, the corresponding drift distance can be obtained, which together with the position of the anode filaments can be used to obtain the position of the charged particle trajectory. The STCF MDC has a total of 48 filament layers, and the positional resolution of the individual filaments is 120 &#xB5;m.</p>
<img src="/images/components_of_electronics_for_particle_physics_experiments.png" alt="components_of_electronics_for_particle_physics_experiments" title="components_of_electronics_for_particle_physics_experiments" width="400">
<p>As shown in the figure above, <strong>the basic composition of the electronics system in particle physics experiments is the front-end readout electronics, the trigger system, the data acquisition system and the slow control system</strong> (you can see <a href="https://mengisok.github.io/Basic-Components-of-Electronics-of-Particle-Physics-Experiments/">Basic Components of Electronics of Particle Physics Experiments</a>). In order to acquire and process the output signals of the STCF MDC, it is necessary to design the electronics system that accompanies it.</p>
<p><strong>The function of the Front-End Readout Electronics</strong> is to amplify the weak electrical signals from the detector outputs, digitize them, and convert them into data reflecting the properties of the particles for reconstruction of the physical instances and recordings by the data acquisition system. The front-end readout electronics can provide the trigger system with information on which parts of the detector have been struck by particles and the energy deposition of the particles in the detector after the initial processing of the detector output signals, as the original conditions for triggering. Front-end readout electronics also need to carry out the necessary pre-processing of the data, such as data compression, data normalization and so on.</p>
<p><strong>The function of the trigger system</strong> is to analyze the data provided by the front-end electronics in real time, and to select physically interested instances from a large amount of instance data, while discarding the false instance data.</p>
<p><strong>The function of the Data Acquisition System</strong> is to collect and assemble the data digitized by the readout electronics system into a complete instance data recorded in mass memory.</p>
<h2 id="Overall-System-Structure">Overall System Structure</h2>
<hr>
<h3 id="MDC-Readout-Electronics">MDC Readout Electronics</h3>
<p>In the preliminary conceptual design of the STCF MDC, the MDC contains 11,520 cells and the total number of readout electronics channels for the signals is also 11,520. The readout electronics are set up in endcaps, which are made of 15 mm thick aluminum plates for mechanical support. The results of the beam simulations show that the first (innermost) layer of the MDC is subjected to the highest background count rate (approximately 200 to 400 kHz), which can severely interfere with the measurement of the charged trajectories of the signal events. The results of the GARFIELD simulations show that, due to the uncertain distribution of the electrons by the distance from the particle trajectories to the wires, the signals in each cell last from 200 to 500 ns. Therefore, the MDC readout electronics system requires highly accurate time measurements (~0.5 ns RMS) and charge measurements (up to 1.8 pC amplitude of the input signal).</p>
<img src="/images/STCF_MDC_readout_electronics_system_architecture.png" alt="STCF_MDC_readout_electronics_system_architecture" title="STCF_MDC_readout_electronics_system_architecture" width="550">
<p>The STCF MDC readout electronics system architecture is shown in the figure above, <strong>consisting of the FEE modules and the RU modules</strong>. The readout electronics of the MDC needs to be synchronized with the system clock signal, which is received by the RU and then fanned out to the FEE. The output of the FEE is collected by the RU, which further aggregates this data and transmits the signals to the DAQ via fiber optics. The RU also receives the global trigger signal and it fans out to the FEE for trigger matching to read out valid data.</p>
<img src="/images/structure_of_FEE.png" alt="structure_of_FEE" title="structure_of_FEE" width="600">
<p>The circuit structure of the FEE is shown above. <strong>The FEE is responsible for the processing of analog signals, A/D conversion, and the measurement of time and charge information</strong>. The signal from the detector MDC is first amplified by the <strong>Trans-Impedance Amplifier (TIA)</strong> to ensure fast response for time measurement and to provide charge measurement. <u>The output signal of the TIA is then split into two: one is connected to the charge measurement circuit and the other is connected to the time measurement circuit.</u></p>
<p><u> For time measurement</u>, the threshold of the <strong>Discriminator (Disc)</strong> is set to a low level considering the characteristic shape of the signal. In order to achieve high time accuracy, an <strong>Amplifier</strong> located before the Discriminator is used to increase the slew rate of the signal. In order to filter out noise crossing the low threshold, another high threshold discriminator is used after shaping. Then, a <strong>Time-to-Digital Converter (TDC)</strong> is used to digitize the leading edge time of the low threshold discriminator.</p>
<p><u>The charge measurement circuit</u> uses a <strong>Shaper</strong> to improve the signal-to-noise ratio, and its output waveform is digitized by an <strong>Analog-to-Digital Converter (ADC)</strong> and sent to an <strong>FPGA</strong> for charge calculation. The output signal of the shaping circuit is fed into a discriminator with a high threshold. The output of this discriminator is used as a HIT flag to start the charge calculation process and as a &#x201C;valid&#x201D; condition for the time measurement of the low threshold discriminator output. In order to suppress the effects of <strong>Data Packaging</strong>, baseline recovery and digital processing on the digitized signal waveform are applied to the circuit design.</p>
<h3 id="Daughter-Mother-Structure-for-Validation-Boards">Daughter-Mother Structure for Validation Boards</h3>
<img src="/images/circuit_model_in_LTspice.png" alt="circuit_model_in_LTspice" title="circuit_model_in_LTspice" width="1000">
<p>The above figure shows the circuit model and simulation performed in LTspice software. In order to further ensure the principle correctness and application feasibility of the scheme, as well as to obtain a preliminary practical test result, a verification board needs to be designed.</p>
<img src="/images/daughterboard_and_motherboard_structure_for_FEE.png" alt="daughterboard_and_motherboard_structure_for_FEE" title="daughterboard_and_motherboard_structure_for_FEE" width="500">
<p>In terms of hardware structure, the verification board is designed as a <strong>flexible daughter-mother board</strong> as shown in the figure above, i.e., a combination of an analog daughter board and a digital mother board. <strong>The analog daughter board receives and conditions the analog signals</strong> from the MDC and inputs the signals to the digital mother board via differential LEMO connectors. <strong>The Digital mother board performs analog-to-digital conversion of the signals, and processes and calculates the digital signals in the FPGA</strong>, and finally outputs the desired data results to the PC through the connector. It is more difficult to use high-speed ADC to realize 32-channel signal readout, so the number of channels of a single verification board system is set at 16. 2 channels are available on a single daughter board, and a single mother board can be connected to 2 daughter boards, so a single verification board system contains 8 daughter boards and 4 mother boards.</p>
<p><strong>The daughter boards mainly contain the TIA as well as the ADC driver</strong>. Since the sampling rate of ADC is between 500MHz and 1GHz, a dual-channel, 14-bit ADC chip with a sampling rate of 1GHz, GM4680-1000 is considered. In the mother board, the FPGA chip selection needs to give priority to meet the data reception requirements of the ADC to ensure the normal operation of the high-speed transceiver interface.</p>
<p>The system clock is provided by the local crystal or clock interface. The FPGA generates the clocks for the ADC drivers and sends them to the ADCs through the clock driver to ensure that all the ADCs work synchronously. The clock synchronization of the MDC electronics needs to be done through the clock interface.</p>
<p>The MDC signal input interface is determined by the output of the detector. The data trigger interface is determined by the DAQ together with the trigger system.</p>
<p>The calibration circuit is used for subsequent testing or self-testing of the electronics function.</p>
<h2 id="Design-of-the-Analog-Daughter-Board">Design of the Analog Daughter Board</h2>
<hr>
<p>We use Cadence to design the electronics system. First design the circuit schematic in OrCAD Capture CIS and then design the printed circuit board (PCB) in Allegro PCB Editor.</p>
<h3 id="Schematic-design">Schematic design</h3>
<p>The schematic of the daughter board consists of 4 pages, in order of the circuits of the <mark>TIA and ADC Driver, Power Supply, Master Control and Calibration</mark> sections.</p>
<ul>
<li>
<p><mark>TIA and ADC Driver Section</mark></p>


	<div class="row">
    <embed src="/pdf/TIA.pdf" width="100%" height="550" type="application/pdf">
	</div>



</li>
</ul>
<p><strong>The analog signal from the detector is fed into the daughter board through the LEMO connector, and then passes through the isolation capacitors and matching resistors into the preamplifier</strong>. A preamplifier is a circuit or electronic device placed between a signal source and an amplifier, and is designed to accept weak signals from the signal source. A preamplifier that processes charge (current) information is called a charge-sensitive amplifier.</p>
<p><strong>The preamplifier uses the OPA855 chip</strong>. It is a wide-band low-noise operational amplifier with bipolar inputs for <strong>wideband transimpedance and voltage amplification</strong>. If this op-amp is configured as a TIA, its 8 GHz Gain-BandWidth Product (GBWP) is capable of achieving high closed-loop bandwidths with transimpedance gains of up to several tens of kilo-ohms. Simulation test results show that the OPA855&#x2019;s -3dB bandwidth is 80MHz when the OPA855&#x2019;s gain is 20k&#x3A9; and the detector&#x2019;s equivalent capacitance to ground is 50pF. The OPA855&#x2019;s reverse end is connected to a feedback resistor, and the forward end is connected to ground through a 0&#x3A9; resistor or can also be baselined through a Digital-Analog Converter (DAC). According to the impedance value of the MDC signal, adjust the matching resistors appropriately, and when the impedance is matched, the noise of the circuit is minimized. Bypass capacitors are placed near the power supply side to filter out high frequency noise and reduce coupling interference.</p>
<p>After the signal is conditioned and amplified by OPA855, it is fed into CR-RC passive filter network to facilitate the subsequent debugging. The signals processed by the filter network are sequentially isolated by capacitors and matched by resistors, and then fed into the ADC driver, which is generally placed close to the ADC. Bypass capacitors are also required near the power supply.</p>
<p><strong>The ADC driver uses the LTC6419 chip</strong>. It is a dual-channel, very high-speed and low-distortion differential amplifier that <strong>converts the input single-ended signal to a differential signal to drive the ADC connected behind it, and isolates the preamplifier from the ADC and acts as a buffer</strong>. The differential ADC driver is an indispensable signal conditioning component in the data acquisition system. In this design, the differential amplification gain of the LTC6419 is configured as 2.</p>
<ul>
<li>
<p><mark>Power Supply Section</mark></p>


	<div class="row">
    <embed src="/pdf/POWER.pdf" width="100%" height="550" type="application/pdf">
	</div>



</li>
</ul>
<p><strong>The external power supply enters the board through the power socket, and after a series of capacitive filtering and inductive isolation, it is fed into the Low-Dropout Regulator (LDO) component. The LDO is configured to obtain the required supply voltage for the entire board</strong>. A LDO is a type of linear DC regulator used to provide a stable DC voltage supply. It is able to operate with a smaller output-input voltage difference than a typical linear DC regulator. The LDO in this design is LT1764, which has the advantages of fast transient response and very low output voltage noise.</p>
<ul>
<li>
<p><mark>Main Control Section</mark></p>


	<div class="row">
    <embed src="/pdf/MASTER.pdf" width="100%" height="550" type="application/pdf">
	</div>



</li>
</ul>
<p><strong>The function of the main control section is globally control and connects the various modules between the daughter and mother boards</strong>. It mainly contains a connector that serves as the interface to the daughter and mother boards, a LEMO connector for the output signals, and several selection resistors for subsequent debugging and testing. The daughter-mother interface of this design uses Samtec&#x2019;s TFM-115-01-L-D-DS model connector, which has a total of 30 pins available. It has less than 1% crosstalk between adjacent pins for signals with a rising edge of 1 ns; single-ended impedance of 48.2-50.8 &#x3A9; and differential impedance of 92.2-102.8 &#x3A9;; a bandwidth of up to 8 GHz; and can pass current signals up to 1 A @ 70 &#xB0;C.</p>
<p>The pins of the connector between the daughter boards are defined as following: DIFF_1_SAM_N, DIFF_1_SAM_P, and DIFF_2_SAM_N, DIFF_2_SAM_P are the output pins of the two-channel ADC drivers; DAC_CH_1, DAC_CH_2, DAC_CH_3, and DAC_CH_4 are the output pins of the DAC on the  mother board; FPGA_1, FPGA_2, FPGA_3, and FPGA_4 are the control signals of the calibration circuit, which are connected to the FPGA chip on the mother board; MASTER_POWER is the input pin of the power supply at +5.5 V; the other pins need to be grounded to reduce the noise and electromagnetic radiation and protect the signals.</p>
<ul>
<li>
<p><mark>Calibration section</mark></p>


	<div class="row">
    <embed src="/pdf/CALIBRATION.pdf" width="100%" height="550" type="application/pdf">
	</div>



</li>
</ul>
<p>By controlling the analog switch&#x2019;s disconnection and conduction, capacitors C19 and C20 are charged and discharged through resistors R38, R41 and R40, R42 respectively, and are input to TIA through resistors R36 and R39 as calibration signals. The charge of the calibration signal is determined by the calibration reference voltage and the capacitors C19 and C20, and the signal characteristics are determined by the capacitors C19 and C20 and the resistors R38, R41, R40 and R42. The analog switch in the calibration circuit is TMUX6211PWR, which is a four-channel Complementary Metal-Oxide-Semiconductor (CMOS) precision switch. It controls the outputs through the appropriate input logic on the SELx pins. The TMUX6211PWR has an on-resistance of 2 &#x3A9;, and has a maximum current of 200 mA when on. The bypass capacitor near the power supply is still required.</p>
<h3 id="PCB-Design">PCB Design</h3>
<p>Since the number of components on the daughter board is small and the circuit structure is simple, a four-layer PCB board structure is enough. The top and bottom layers are the signal layer, which is convenient for flexible layout and alignment; the middle two layers are the ground layer and the power layer in order from top to bottom. The power supply layer and ground layer in the middle can play a role in isolating the two signal layers and reducing the mutual interference between them.</p>
<img src="/images/STCF_MDC_FEE_PCB.png" alt="STCF_MDC_FEE_PCB" title="STCF_MDC_FEE_PCB" width="1000">
<p>The completed PCB designed in Allegro PCB Editor is shown above. The figure shows only the signal layers, with the top layer in red and the bottom layer in blue. Both signal layers are covered with grounded copper to improve circuit shielding. The size of the rectangular PCB is 2500mil * 2800mil (about 63.5mm * 71.1mm).</p>
<img src="/images/FEE_PCB.png" alt="FEE_PCB" title="FEE_PCB" width="500">
<p>Above is a picture of the real PCB.</p>
<h2 id="Conclusion">Conclusion</h2>
<p>In this work, we have designed the schematic and PCB for the STCF MDC detector readout electronics analog daughter board, and have completed PCB manufacturing, elements soldering and preliminary testing, and are in the process of conducting joint testing with the detector. Based on this work, a more refined design is needed to incorporate the latest requirements of the detector and to carry out joint testing with the back-end digital system.</p>
<h2 id="References">References</h2>
<p><a target="_blank" rel="noopener" href="http://www.wuli.ac.cn/cn/article/doi/10.7693/wl20200803">&#x4E2D;&#x56FD;&#x8D85;&#x7EA7;&#x9676;&#x7CB2;&#x88C5;&#x7F6E;</a></p>
<p><a target="_blank" rel="noopener" href="https://arxiv.org/abs/2303.15790">STCF Conceptual Design Report: Volume 1&#x2013;Physics</a></p>

    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/%E7%89%A9%E7%90%86%E7%94%B5%E5%AD%90%E5%AD%A6/">#Physical Electronics</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/%E8%AF%BB%E5%87%BA%E7%94%B5%E5%AD%90%E5%AD%A6/">#Readout Electronics</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/STCF/">#STCF</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop  article-nav-prev">
            
            <a href="/Use-of-WRPC/">Use of WRPC</a>
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/Sep-2023/">Sep 2023</a>
            
        </span>
    </div>
    
</article>


<div class="sharebox">
    
<div class="sharethis-inline-share-buttons"></div>
<script type='text/javascript' src='https://platform-api.sharethis.com/js/sharethis.js#property=63b7aca8a1c9f30019b28e79&amp;product=inline-share-buttons' async='async'></script>

</div>



<div class="comments">
    <h3 class="title is-4">Comments</h3>
    
<script>
    var disqus_config = function () {
        this.page.url = 'https://mengisok.github.io/Design-of-STCF-MDC-FEE/';
        this.page.identifier = 'Design-of-STCF-MDC-FEE/';
        
        this.language = 'en';
        
    };
    (function() {
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'mengisok' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

<div id="disqus_thread">
    
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</div>

    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                Go forward. Don&#39;t look back. &nbsp;
                <!-- &copy; 2023 Han Meng&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        target="_blank" rel="noopener" href="http://github.com/ppoffice/hexo-theme-minos">Minos</a> -->
            </div>
            <div class="column is-hidden-mobile"></div>

            
            <!-- 
<div class="column is-narrow has-text-centered">
    <div class="dropdown is-up is-right is-hoverable" style="margin-top: -0.2em;">
        <div class="dropdown-trigger">
            <button class="button is-small" aria-haspopup="true" aria-controls="dropdown-menu7">
                <span class="icon">
                    <i class="fas fa-globe"></i>
                </span>
                <span>English</span>
                <span class="icon is-small">
            <i class="fas fa-angle-down" aria-hidden="true"></i>
          </span>
            </button>
        </div>
        <div class="dropdown-menu has-text-left" role="menu" style="top:100%">
            <div class="dropdown-content">
            
                <a href="/Design-of-STCF-MDC-FEE/" class="dropdown-item">
                    English
                </a>
            
                <a href="/zh-cn/Design-of-STCF-MDC-FEE/" class="dropdown-item">
                    简体中文
                </a>
            
            </div>
        </div>
    </div>
</div>
 -->
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("en-AU");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
</script>

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>

<script>
document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
        // ...options...
    });
});
</script>

    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery > p > .gallery-item').unwrap();
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
            position: relative;
        }

        .hljs .clipboard-btn {
            float: right;
            color: #9a9a9a;
            background: none;
            border: none;
            cursor: pointer;
        }

        .hljs .clipboard-btn:hover {
          color: #8a8a8a;
        }

        .hljs > .clipboard-btn {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
        }

        .hljs:hover > .clipboard-btn {
            display: inline;
        }

        .hljs > figcaption > .clipboard-btn {
            margin-right: 4px;
        }
    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button>Copy <i class="far fa-clipboard"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
        clipboard.on('success', function(e) {
          e.clearSelection();
        })
      })
    </script>

    
    

    



<script src="/js/script.js"></script>


    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>

<script src="/js/insight.js"></script>

    
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/assets/hijiki.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"right","hOffset":0,"vOffset":-20},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false});</script></body>
</html>